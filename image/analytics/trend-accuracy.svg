<svg xmlns="http://www.w3.org/2000/svg" width="900" height="500" viewBox="0 0 900 500">
  <defs>
    <style>
      text { font-family: 'Inter', 'Segoe UI', system-ui, sans-serif; }
      .mono { font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace; }
    </style>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b949e"/>
    </marker>
    <marker id="arrowGreen2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="500" fill="#0d1117"/>

  <!-- Title -->
  <text x="450" y="46" fill="#ffffff" font-size="18" font-weight="700" text-anchor="middle">Week-over-Week Trend Calculation</text>
  <line x1="260" y1="52" x2="640" y2="52" stroke="#22c55e" stroke-width="2"/>

  <!-- ===== LEFT PANEL: Week 1 Data ===== -->
  <rect x="30" y="74" width="256" height="260" rx="10" fill="#161b22" stroke="#30363d" stroke-width="1.5"/>

  <!-- Header -->
  <rect x="30" y="74" width="256" height="36" rx="10" fill="#21262d"/>
  <rect x="30" y="92" width="256" height="18" fill="#21262d"/>
  <text x="158" y="98" fill="#8b949e" font-size="13" font-weight="600" text-anchor="middle">Week 1 Data</text>

  <!-- Column headers -->
  <text x="50" y="128" fill="#8b949e" font-size="10" font-weight="600">Page URL</text>
  <text x="246" y="128" fill="#8b949e" font-size="10" font-weight="600" text-anchor="end">Position</text>
  <line x1="46" y1="133" x2="278" y2="133" stroke="#30363d" stroke-width="1"/>

  <!-- Row 1 -->
  <text x="50" y="156" fill="#58a6ff" font-size="11" font-family="'JetBrains Mono','Fira Code',monospace">/page-a</text>
  <rect x="220" y="144" width="46" height="18" rx="3" fill="#1e3a5f"/>
  <text x="243" y="157" fill="#93c5fd" font-size="11" font-weight="600" text-anchor="middle">pos 18</text>

  <!-- Row 2 -->
  <text x="50" y="184" fill="#58a6ff" font-size="11" font-family="'JetBrains Mono','Fira Code',monospace">/page-b</text>
  <rect x="220" y="172" width="46" height="18" rx="3" fill="#1e3a5f"/>
  <text x="243" y="185" fill="#93c5fd" font-size="11" font-weight="600" text-anchor="middle">pos 24</text>

  <!-- Row 3 -->
  <text x="50" y="212" fill="#58a6ff" font-size="11" font-family="'JetBrains Mono','Fira Code',monospace">/page-c</text>
  <rect x="220" y="200" width="46" height="18" rx="3" fill="#1e3a5f"/>
  <text x="243" y="213" fill="#93c5fd" font-size="11" font-weight="600" text-anchor="middle">pos 31</text>

  <line x1="46" y1="224" x2="278" y2="224" stroke="#30363d" stroke-width="1" stroke-dasharray="3,3"/>

  <!-- More rows placeholder -->
  <text x="50" y="242" fill="#30363d" font-size="10" font-family="'JetBrains Mono','Fira Code',monospace">/page-d</text>
  <text x="243" y="242" fill="#30363d" font-size="10" text-anchor="middle">pos 41</text>
  <text x="50" y="260" fill="#30363d" font-size="10" font-family="'JetBrains Mono','Fira Code',monospace">/page-e</text>
  <text x="243" y="260" fill="#30363d" font-size="10" text-anchor="middle">pos 55</text>
  <text x="50" y="278" fill="#30363d" font-size="10" font-family="'JetBrains Mono','Fira Code',monospace">/page-f</text>
  <text x="243" y="278" fill="#30363d" font-size="10" text-anchor="middle">pos 62</text>

  <!-- Footer -->
  <line x1="46" y1="290" x2="278" y2="290" stroke="#30363d" stroke-width="1"/>
  <text x="158" y="322" fill="#8b949e" font-size="11" text-anchor="middle">1,000 rows total</text>

  <!-- ===== RIGHT PANEL: Week 2 Data ===== -->
  <rect x="614" y="74" width="256" height="260" rx="10" fill="#161b22" stroke="#30363d" stroke-width="1.5"/>

  <!-- Header -->
  <rect x="614" y="74" width="256" height="36" rx="10" fill="#21262d"/>
  <rect x="614" y="92" width="256" height="18" fill="#21262d"/>
  <text x="742" y="98" fill="#8b949e" font-size="13" font-weight="600" text-anchor="middle">Week 2 Data</text>

  <!-- Column headers -->
  <text x="634" y="128" fill="#8b949e" font-size="10" font-weight="600">Page URL</text>
  <text x="862" y="128" fill="#8b949e" font-size="10" font-weight="600" text-anchor="end">Position</text>
  <line x1="630" y1="133" x2="862" y2="133" stroke="#30363d" stroke-width="1"/>

  <!-- Row 1 — improved -->
  <text x="634" y="156" fill="#58a6ff" font-size="11" font-family="'JetBrains Mono','Fira Code',monospace">/page-a</text>
  <rect x="804" y="144" width="46" height="18" rx="3" fill="#0d2818"/>
  <text x="827" y="157" fill="#4ade80" font-size="11" font-weight="600" text-anchor="middle">pos 14</text>

  <!-- Row 2 -->
  <text x="634" y="184" fill="#58a6ff" font-size="11" font-family="'JetBrains Mono','Fira Code',monospace">/page-b</text>
  <rect x="804" y="172" width="46" height="18" rx="3" fill="#0d2818"/>
  <text x="827" y="185" fill="#4ade80" font-size="11" font-weight="600" text-anchor="middle">pos 19</text>

  <!-- Row 3 -->
  <text x="634" y="212" fill="#58a6ff" font-size="11" font-family="'JetBrains Mono','Fira Code',monospace">/page-c</text>
  <rect x="804" y="200" width="46" height="18" rx="3" fill="#0d2818"/>
  <text x="827" y="213" fill="#4ade80" font-size="11" font-weight="600" text-anchor="middle">pos 28</text>

  <line x1="630" y1="224" x2="862" y2="224" stroke="#30363d" stroke-width="1" stroke-dasharray="3,3"/>

  <!-- More rows placeholder -->
  <text x="634" y="242" fill="#30363d" font-size="10" font-family="'JetBrains Mono','Fira Code',monospace">/page-d</text>
  <text x="827" y="242" fill="#30363d" font-size="10" text-anchor="middle">pos 35</text>
  <text x="634" y="260" fill="#30363d" font-size="10" font-family="'JetBrains Mono','Fira Code',monospace">/page-e</text>
  <text x="827" y="260" fill="#30363d" font-size="10" text-anchor="middle">pos 48</text>
  <!-- New page in week 2 -->
  <text x="634" y="278" fill="#22c55e" font-size="10" font-family="'JetBrains Mono','Fira Code',monospace">/page-new</text>
  <text x="827" y="278" fill="#22c55e" font-size="10" text-anchor="middle">pos 44</text>

  <!-- Footer -->
  <line x1="630" y1="290" x2="862" y2="290" stroke="#30363d" stroke-width="1"/>
  <text x="742" y="322" fill="#8b949e" font-size="11" text-anchor="middle">1,247 rows total</text>

  <!-- ===== ARROWS between panels and center ===== -->
  <line x1="286" y1="204" x2="338" y2="204" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <line x1="614" y1="204" x2="562" y2="204" stroke="#8b949e" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- ===== CENTER CALCULATION PANEL ===== -->
  <rect x="338" y="130" width="224" height="168" rx="10" fill="#161b22" stroke="#22c55e" stroke-width="2"/>

  <!-- Header -->
  <rect x="338" y="130" width="224" height="32" rx="10" fill="#0d2818"/>
  <rect x="338" y="148" width="224" height="14" fill="#0d2818"/>
  <text x="450" y="151" fill="#22c55e" font-size="10" font-weight="600" text-anchor="middle" font-family="'JetBrains Mono','Fira Code',monospace">calculateTrend('/page-a')</text>

  <!-- Calculation steps -->
  <text x="362" y="185" fill="#8b949e" font-size="10">Previous position</text>
  <text x="548" y="185" fill="#8b949e" font-size="10" text-anchor="end">Week 1: 18</text>

  <text x="362" y="205" fill="#8b949e" font-size="10">Current position</text>
  <text x="548" y="205" fill="#8b949e" font-size="10" text-anchor="end">Week 2: 14</text>

  <line x1="354" y1="214" x2="548" y2="214" stroke="#30363d" stroke-width="1"/>

  <!-- Result -->
  <text x="450" y="236" fill="#22c55e" font-size="24" font-weight="700" text-anchor="middle">+4 positions</text>
  <text x="450" y="256" fill="#22c55e" font-size="13" text-anchor="middle">(18 → 14)</text>

  <!-- Note below arrow -->
  <text x="450" y="286" fill="#4ade80" font-size="10" text-anchor="middle">Lower = Better rank</text>

  <!-- ===== CAPTION ===== -->
  <text x="450" y="368" fill="#ffffff" font-size="14" text-anchor="middle">Correct trend even when total page count changes week to week.</text>

  <!-- ===== CODE SNIPPET ===== -->
  <rect x="240" y="390" width="420" height="78" rx="8" fill="#0f1923" stroke="#21262d" stroke-width="1"/>
  <circle cx="260" cy="406" r="4" fill="#ff5f57"/>
  <circle cx="276" cy="406" r="4" fill="#ffbd2e"/>
  <circle cx="292" cy="406" r="4" fill="#28c840"/>
  <text x="260" y="430" fill="#22c55e" font-size="12" font-family="'JetBrains Mono','Fira Code',monospace">calculateTrend(current, previous)</text>
  <text x="260" y="452" fill="#8b949e" font-size="11" font-family="'JetBrains Mono','Fira Code',monospace">// Works correctly when pages are added/removed</text>
</svg>
