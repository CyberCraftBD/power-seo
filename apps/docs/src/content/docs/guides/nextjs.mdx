---
title: "Next.js App Router"
description: "Guide for using @power-seo packages with Next.js App Router for static and dynamic metadata, JSON-LD, and sitemaps."
---

## Install

```bash
npm install @power-seo/meta @power-seo/core @power-seo/schema
```

## Static Metadata in layout.tsx

```typescript
// app/layout.tsx
import { createMetadata } from '@power-seo/meta';

export const metadata = createMetadata({
  titleTemplate: '%s | My Site',
  description: 'Default site description.',
  openGraph: { type: 'website', siteName: 'My Site' },
  twitter: { cardType: 'summary_large_image', site: '@mysite' },
});

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return <html lang="en"><body>{children}</body></html>;
}
```

## Per-Page Static Metadata

```typescript
// app/about/page.tsx
import { createMetadata } from '@power-seo/meta';

export const metadata = createMetadata({
  title: 'About Us',
  description: 'Learn about our team and mission.',
  canonical: 'https://example.com/about',
});
```

## Dynamic Metadata with generateMetadata

```typescript
// app/blog/[slug]/page.tsx
import { createMetadata } from '@power-seo/meta';
import type { Metadata } from 'next';

export async function generateMetadata({ params }: { params: { slug: string } }): Promise<Metadata> {
  const post = await getPost(params.slug);
  return createMetadata({
    title: post.title,
    description: post.excerpt,
    canonical: `https://example.com/blog/${params.slug}`,
    openGraph: { type: 'article', title: post.title, images: [{ url: post.ogImage }] },
    robots: { index: true, follow: true, maxSnippet: 150, maxImagePreview: 'large' },
  });
}
```

## JSON-LD Structured Data

```typescript
// app/blog/[slug]/page.tsx
import { article, toJsonLdString } from '@power-seo/schema';

export default async function BlogPost({ params }: { params: { slug: string } }) {
  const post = await getPost(params.slug);
  const jsonLd = article({
    headline: post.title,
    author: { name: post.author },
    datePublished: post.publishedAt,
    image: { url: post.ogImage },
  });
  return (
    <>
      <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: toJsonLdString(jsonLd) }} />
      <article>{/* page content */}</article>
    </>
  );
}
```

## Sitemap Generation

Use `toNextSitemap()` from `@power-seo/sitemap/next` for the native Next.js format:

```typescript
// app/sitemap.ts
import { toNextSitemap } from '@power-seo/sitemap/next';

export default async function sitemap() {
  const pages = await getAllPages();
  return toNextSitemap(
    pages.map((p) => ({ loc: p.url, lastmod: p.updatedAt, priority: 0.8 }))
  );
}
```

Or use a route handler to return raw XML:

```typescript
// app/sitemap.xml/route.ts
import { generateSitemap } from '@power-seo/sitemap';

export async function GET() {
  const pages = await getAllPages();
  const xml = generateSitemap({
    hostname: 'https://example.com',
    urls: pages.map((p) => ({ loc: p.url, lastmod: p.updatedAt, priority: 0.8 })),
  });
  return new Response(xml, { headers: { 'Content-Type': 'application/xml' } });
}
```
